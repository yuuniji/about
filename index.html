<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>叶泽伟的作品集</title>
    <style>
        body {
            /* font-family: 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace; */
            font-family: Menlo, Monaco, 'Courier New', monospace;
            margin: 0;
            padding: 0;
            background: #f5f7fa;
            color: #23272e;
            min-height: 100vh;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s, color 0.3s;
            position: relative;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .lang-switcher {
            position: fixed;
            top: 18px;
            right: 32px;
            z-index: 10;
        }

        .lang-switcher button {
            background: none;
            border: none;
            color: #666;
            font-size: 14px;
            margin: 0 5px;
            cursor: pointer;
            text-decoration: underline;
            font-family: inherit;
            transition: color 0.2s;
        }

        .lang-switcher button:hover {
            color: #23272e;
            text-decoration: none;
        }

        .terminal-window {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            box-shadow: 
                0 2px 4px rgba(0, 0, 0, 0.02),
                0 4px 8px rgba(0, 0, 0, 0.02),
                0 8px 16px rgba(0, 0, 0, 0.02),
                0 16px 32px rgba(0, 0, 0, 0.02),
                0 0 0 1px rgba(0, 0, 0, 0.05);
            max-width: 800px;
            width: 95vw;
            margin: 48px auto 24px auto;
            overflow: hidden;
            border: 1.5px solid rgba(224, 227, 231, 0.8);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
            animation: terminalAppear 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes terminalAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .terminal-bar {
            background: #f5f7fa;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 18px;
            border-bottom: 1px solid #e0e3e7;
            position: relative;
            transition: background 0.3s, border-color 0.3s;
        }

        .mac-btn {
            display: inline-block;
            width: 13px;
            height: 13px;
            border-radius: 50%;
            margin-right: 7px;
            border: 1px solid rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, opacity 0.2s;
        }

        .mac-btn:hover {
            transform: scale(1.1);
            opacity: 0.8;
        }

        .mac-btn-group {
            display: flex;
            align-items: center;
            gap: 7px;
            margin-right: 16px;
            justify-content: flex-start;
        }

        .mac-btn-group.placeholder {
            width: 47px;
            min-width: 47px;
            max-width: 47px;
            visibility: hidden;
            pointer-events: none;
            margin-right: 0;
        }

        .mac-close {
            background: #ff5f56;
        }

        .mac-min {
            background: #ffbd2e;
        }

        .mac-max {
            background: #27c93f;
            margin-right: 0;
        }

        .terminal-content {
            padding: 32px 30px 28px 30px;
            min-height: 400px;
            position: relative;
            transition: padding 0.3s;
        }

        .terminal-title {
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-family: inherit;
            font-weight: 500;
            color: #23272e;
            background: transparent;
            border: none;
            letter-spacing: 0.5px;
            text-shadow: none;
            user-select: text;
            z-index: 2;
            height: 100%;
            min-width: 0;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            opacity: 1;
            padding: 0 8px;
            margin: 0 120px;
        }

        .clock {
            position: absolute;
            right: 120px;
            font-size: 14px;
            color: #666;
            font-family: inherit;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        @media (max-width: 900px) {
            .terminal-title {
                margin: 0 100px;
            }
            .clock {
                right: 100px;
                font-size: 13px;
            }
        }

        @media (max-width: 768px) {
            .terminal-title {
                margin: 0 80px;
            }
            .clock {
                right: 80px;
                font-size: 12px;
            }
        }

        @media (max-width: 600px) {
            .terminal-title {
                margin: 0 60px;
                font-size: 13.5px;
            }
            .clock {
                right: 60px;
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .terminal-title {
                margin: 0 40px;
                font-size: 12px;
            }
            .clock {
                right: 40px;
                font-size: 10px;
            }
        }

        @media (max-width: 400px) {
            .terminal-title {
                margin: 0 20px;
                font-size: 11px;
            }
            .clock {
                right: 20px;
                font-size: 9px;
            }
        }

        @media (max-width: 320px) {
            .terminal-title {
                margin: 0 10px;
                font-size: 10px;
            }
            .clock {
                display: none;
            }
        }

        @media (prefers-color-scheme: dark) {
            .clock {
                color: #bdbdbd;
            }
        }

        .terminal-cursor {
            display: inline-block;
            width: 0.85em;
            height: 1.1em;
            background: none;
            color: #27c93f;
            font-weight: bold;
            font-size: 1em;
            animation: blink 1s steps(1) infinite;
            vertical-align: middle;
            transition: color 0.3s;
        }

        @keyframes blink {
            0%,
            50% {
                opacity: 1;
            }

            51%,
            100% {
                opacity: 0;
            }
        }

        .underline {
            border-bottom: 2px solid #e0e3e7;
            margin: 18px auto 18px auto;
            width: 90%;
            transition: border-bottom 0.3s;
        }

        .content-block {
            width: 94%;
            margin: 0 auto;
            text-align: left;
            font-family: inherit;
            background: rgba(0, 0, 0, 0.03);
            border-radius: 6px;
            padding: 10px 12px 12px 16px;
            box-sizing: border-box;
            font-size: 15px;
            letter-spacing: 0.01em;
            border-left: 3px solid #27c93f;
            margin-top: 12px;
        }

        h2 {
            font-size: clamp(17px, 2.7vw, 20px);
            font-weight: bold;
            margin: 18px 0 6px 0;
            color: #1a7cf7;
            text-shadow: none;
            transition: color 0.3s;
        }

        ul {
            list-style-type: none;
            padding: 0;
            margin: 0 0 0 0;
        }

        li {
            font-size: clamp(13.5px, 2vw, 15px);
            margin-bottom: 5px;
            word-break: break-all;
            line-height: 1.55;
            font-family: inherit;
            display: flex;
            align-items: flex-start;
            gap: 5px;
            padding-left: 0;
        }

        .prompt {
            color: #27c93f;
            font-weight: bold;
            font-family: inherit;
            user-select: none;
            flex-shrink: 0;
        }

        a {
            color: #1a7cf7;
            text-decoration: underline;
            transition: color 0.2s;
            font-family: inherit;
        }

        a:hover {
            color: #23272e;
            text-decoration: underline wavy;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .terminal-window {
                margin: 24px auto 12px auto;
                box-shadow: 
                    0 2px 4px rgba(0, 0, 0, 0.02),
                    0 4px 8px rgba(0, 0, 0, 0.02),
                    0 8px 16px rgba(0, 0, 0, 0.02);
            }

            .terminal-content {
                padding: 18px 7vw 18px 7vw;
            }

            h1 {
                margin: 15px 0;
            }

            h2 {
                margin: 16px 0 8px 0;
            }

            .content-block {
                width: 99%;
            }

            .underline {
                width: 98%;
                margin: 10px auto;
            }

            .lang-switcher {
                top: 8px;
                right: 8vw;
            }
        }

        @media (max-width: 400px) {
            .terminal-content {
                padding: 10px 2vw 10px 2vw;
            }

            .underline {
                width: 99%;
            }

            .content-block {
                width: 99%;
            }
        }

        /* 跟随系统色彩模式适配终端风格 */
        @media (prefers-color-scheme: dark) {
            body {
                background: #23272e;
                color: #e3e5e8;
            }

            .terminal-title {
                color: #e3e5e8;
                background: transparent;
                border: none;
            }

            .lang-switcher button {
                color: #bdbdbd;
            }

            .lang-switcher button:hover {
                color: #fff;
            }

            .terminal-window {
                background: rgba(24, 24, 24, 0.95);
                box-shadow: 
                    0 2px 4px rgba(0, 0, 0, 0.1),
                    0 4px 8px rgba(0, 0, 0, 0.1),
                    0 8px 16px rgba(0, 0, 0, 0.1),
                    0 16px 32px rgba(0, 0, 0, 0.1),
                    0 0 0 1px rgba(255, 255, 255, 0.05);
                border: 1.5px solid rgba(255, 255, 255, 0.1);
            }

            .terminal-bar {
                background: #1a1a1a;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            h1 {
                color: #e3e5e8;
                text-shadow: 0 1px 0 #23272e;
            }

            .underline {
                border-bottom: 2px solid #444c56;
            }

            h2 {
                color: #aad7fe;
                text-shadow: 0 1px 0 #23272e;
            }

            a {
                color: #7ecfff;
            }

            a:hover {
                color: #fff;
            }

            .clock {
                color: #bdbdbd;
            }
        }

        /* 仿终端历史样式 */
        .terminal-history {
            font-family: 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
            font-size: 15px;
            color: #e3e5e8;
            background: transparent;
            padding: 0;
            margin: 0;
            min-height: 220px;
            line-height: 1.6;
            letter-spacing: 0.01em;
        }

        .term-row {
            display: flex;
            align-items: flex-start;
            margin-bottom: 2px;
            word-break: break-all;
            opacity: 0;
            transform: translateY(10px);
            animation: rowAppear 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes rowAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .term-prompt {
            color: #27c93f;
            font-weight: bold;
            margin-right: 7px;
            flex-shrink: 0;
            user-select: none;
            transition: color 0.3s;
        }

        .term-cmd {
            color: #23272e;
            font-weight: 500;
            transition: color 0.3s;
        }

        .term-output {
            color: #0056b3;
            margin-left: 28px;
            white-space: pre-line;
            word-break: break-all;
            transition: color 0.3s, margin 0.3s;
        }

        .term-output a {
            color: #0056b3;
            text-decoration: underline;
            margin-right: 18px;
            font-size: 15px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 2px 4px;
            border-radius: 4px;
        }

        .term-output a:hover, .term-output a:focus {
            color: #003d82;
            background: rgba(26, 124, 247, 0.1);
            text-decoration: none;
            transform: translateY(-1px);
        }

        @media (max-width: 600px) {
            .terminal-history {
                font-size: 13px;
                min-height: 120px;
            }

            .term-output a {
                font-size: 13px;
                margin-right: 12px;
            }

            .term-output {
                margin-left: 15px;
            }
        }

        @media (prefers-color-scheme: light) {
            .terminal-history {
                color: #23272e;
            }

            .term-cmd {
                color: #23272e;
            }

            .term-prompt {
                color: #27c93f;
            }

            .term-output {
                color: #1a7cf7;
            }

            .term-output a {
                color: #1a7cf7;
            }
        }

        /* 添加键盘焦点样式 */
        :focus {
            outline: 3px solid #1a7cf7;
            outline-offset: 2px;
        }

        /* 提高链接颜色对比度 */
        a {
            color: #0056b3;
            text-decoration: underline;
            transition: color 0.2s, background-color 0.2s;
            font-family: inherit;
        }

        a:hover, a:focus {
            color: #003d82;
            text-decoration: underline wavy;
            background-color: rgba(26, 124, 247, 0.1);
        }

        /* 提高标题颜色对比度 */
        h2 {
            font-size: clamp(17px, 2.7vw, 20px);
            font-weight: bold;
            margin: 18px 0 6px 0;
            color: #0056b3;
            text-shadow: none;
            transition: color 0.3s;
        }

        /* 深色模式下的颜色对比度优化 */
        @media (prefers-color-scheme: dark) {
            body {
                background: #1a1a1a;
                color: #ffffff;
            }

            .terminal-window {
                background: rgba(24, 24, 24, 0.95);
                box-shadow: 
                    0 2px 4px rgba(0, 0, 0, 0.1),
                    0 4px 8px rgba(0, 0, 0, 0.1),
                    0 8px 16px rgba(0, 0, 0, 0.1),
                    0 16px 32px rgba(0, 0, 0, 0.1),
                    0 0 0 1px rgba(255, 255, 255, 0.05);
                border: 1.5px solid rgba(255, 255, 255, 0.1);
            }

            .terminal-bar {
                background: #1a1a1a;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .mac-btn {
                border-color: rgba(255, 255, 255, 0.1);
            }

            .term-cmd {
                color: #ffffff;
            }

            .term-output {
                color: #4dabff;
            }

            .term-output a {
                color: #4dabff;
            }

            .term-output a:hover, .term-output a:focus {
                color: #ffffff;
                background: rgba(77, 171, 255, 0.2);
            }

            .terminal-cursor {
                color: #27c93f;
            }
        }

        /* 修改导航提示样式 */
        .nav-hint {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            background: rgba(26, 124, 247, 0.1);
            color: #0056b3;
            padding: 8px 16px;
            font-size: 14px;
            text-align: center;
            border: 1px solid rgba(26, 124, 247, 0.2);
            border-radius: 6px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 100;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            max-width: 90%;
            width: max-content;
        }

        .nav-hint.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        @media (prefers-color-scheme: dark) {
            .nav-hint {
                background: rgba(77, 171, 255, 0.1);
                color: #4dabff;
                border-color: rgba(77, 171, 255, 0.2);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            }
        }

        @media (max-width: 600px) {
            .nav-hint {
                font-size: 12px;
                padding: 6px 12px;
                bottom: 10px;
            }
        }
    </style>
</head>

<body>
    <div id="particles-js"></div>
    <div class="lang-switcher" role="navigation" aria-label="Language Switcher">
        <button onclick="changeLanguage('zh')" aria-label="Switch to Chinese">中文</button>
        <button onclick="changeLanguage('en')" aria-label="Switch to English">English</button>
        <button onclick="changeLanguage('ja')" aria-label="Switch to Japanese">日本語</button>
    </div>

    <div class="terminal-window" role="main" aria-label="Terminal Interface">
        <div class="terminal-bar" role="banner">
            <span class="mac-btn-group" role="presentation">
                <span class="mac-btn mac-close" role="presentation"></span>
                <span class="mac-btn mac-min" role="presentation"></span>
                <span class="mac-btn mac-max" role="presentation"></span>
            </span>
            <span id="title" class="terminal-title" role="heading" aria-level="1"></span>
            <span id="clock" class="clock" role="status" aria-live="polite"></span>
            <span class="mac-btn-group placeholder" role="presentation"></span>
        </div>
        <div class="terminal-content">
            <div class="terminal-history" id="terminal-history" role="log" aria-live="polite"></div>
        </div>
    </div>
    <div class="nav-hint" id="nav-hint" role="status" aria-live="polite"></div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // 初始化粒子动画
        particlesJS('particles-js', {
            particles: {
                number: {
                    value: 80,
                    density: {
                        enable: true,
                        value_area: 800
                    }
                },
                color: {
                    value: '#27c93f'
                },
                shape: {
                    type: 'circle'
                },
                opacity: {
                    value: 0.5,
                    random: true,
                    anim: {
                        enable: true,
                        speed: 1,
                        opacity_min: 0.1,
                        sync: false
                    }
                },
                size: {
                    value: 3,
                    random: true
                },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#27c93f',
                    opacity: 0.4,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 2,
                    direction: 'none',
                    random: true,
                    straight: false,
                    out_mode: 'out',
                    bounce: false
                }
            },
            interactivity: {
                detect_on: 'canvas',
                events: {
                    onhover: {
                        enable: true,
                        mode: 'grab'
                    },
                    onclick: {
                        enable: true,
                        mode: 'push'
                    },
                    resize: true
                },
                modes: {
                    grab: {
                        distance: 140,
                        line_linked: {
                            opacity: 1
                        }
                    },
                    push: {
                        particles_nb: 4
                    }
                }
            },
            retina_detect: true
        });

        // 根据系统主题切换粒子颜色
        function updateParticleColor(isDark) {
            const color = isDark ? '#27c93f' : '#27c93f';
            const particles = window.pJSDom[0].pJS.particles;
            particles.color.value = color;
            particles.line_linked.color = color;
            window.pJSDom[0].pJS.fn.particlesRefresh();
        }

        // 监听系统主题变化
        const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkModeMediaQuery.addListener((e) => {
            updateParticleColor(e.matches);
        });
        updateParticleColor(darkModeMediaQuery.matches);

        // Data for projects and blog posts
        const data = {
            projects: [
                {
                    url: "https://yuuniji.github.io/fitplan/",
                    label: {
                        zh: "项目03 - 每周徒手增肌计划",
                        en: "Project 03 - Weekly Bodyweight Workout Plan",
                        ja: "プロジェクト03 - 毎週の自重筋トレ計画"
                    }
                },
                {
                    url: "https://yuuniji.github.io/smart-tooltip/",
                    label: {
                        zh: "项目02 - 智能定位的注释系统",
                        en: "Project 02 - Smart Tooltip System with Intelligent Positioning",
                        ja: "プロジェクト02 - インテリジェント位置決め付きツールチップシステム"
                    }
                },
                {
                    url: "https://yuuniji.github.io/",
                    label: {
                        zh: "项目01 - 个人博客网站",
                        en: "Project 01 - Personal Blog Website",
                        ja: "プロジェクト01 - 個人ブログサイト"
                    }
                }
            ],
            blog: [
                {
                    url: "https://yuuniji.github.io/posts/reading-0-overview/",
                    label: {
                        zh: "文章10 - 《阅读日志》系列",
                        en: "Post 10 - 'BookLog' Series",
                        ja: "記事10 - 『読書ログ』シリーズ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-kubernetes/",
                    label: {
                        zh: "文章09 - Kubernetes 路线图",
                        en: "Post 09 - Kubernetes Roadmap",
                        ja: "記事09 - Kubernetesのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-docker/",
                    label: {
                        zh: "文章08 - Docker 路线图",
                        en: "Post 08 - Docker Roadmap",
                        ja: "記事08 - Dockerのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-terraform/",
                    label: {
                        zh: "文章07 - Terraform 路线图",
                        en: "Post 07 - Terraform Roadmap",
                        ja: "記事07 - Terraformのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-git-github/",
                    label: {
                        zh: "文章06 - Git 和 GitHub 路线图",
                        en: "Post 06 - Git and GitHub Roadmap",
                        ja: "記事06 - GitとGitHubのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-go/",
                    label: {
                        zh: "文章05 - Go 路线图",
                        en: "Post 05 - Go Roadmap",
                        ja: "記事05 - Goのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/roadmap-devops/",
                    label: {
                        zh: "文章04 - DevOps 路线图",
                        en: "Post 04 - DevOps Roadmap",
                        ja: "記事04 - DevOpsのロードマップ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/python-0-overview/",
                    label: {
                        zh: "文章03 - 《如何学好Python》系列",
                        en: "Post 03 - 'How to Learn Python Effectively' Series",
                        ja: "記事03 - 『Pythonを上手に学ぶ方法』シリーズ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/how-to-learn-japanese-effectively-0-overview/",
                    label: {
                        zh: "文章02 - 《如何学好日语》系列",
                        en: "Post 02 - 'How to Learn Japanese Effectively' Series",
                        ja: "記事02 - 『日本語を上手に学ぶ方法』シリーズ"
                    }
                },
                {
                    url: "https://yuuniji.github.io/posts/my-first-post/",
                    label: {
                        zh: "文章01 - 我的博客搭建",
                        en: "Post 01 - Building My Blog",
                        ja: "記事01 - 私のブログ構築"
                    }
                }
            ]
        };

        // Translations for static text (title and headings)
        const translations = {
            zh: {
                title: "叶泽伟的作品集",
                projectsHeading: "项目",
                blogHeading: "博客"
            },
            en: {
                title: "yuuniji's Portfolio",
                projectsHeading: "Projects",
                blogHeading: "Blog"
            },
            ja: {
                title: "葉澤偉のポートフォリオ",
                projectsHeading: "プロジェクト",
                blogHeading: "ブログ"
            }
        };

        // Function to render the content based on language
        function renderContent(lang) {
            const content = translations[lang];

            // Update page title
            document.title = content.title;
            // Terminal title栏显示（带光标）
            const titleEl = document.getElementById('title');
            titleEl.setAttribute('title', content.title);
            titleEl.innerHTML = `${content.title}<span class="terminal-cursor">▋</span>`;

            // 渲染终端历史
            renderTerminalHistory(lang);
        }

        // 仿终端命令历史逻辑
        // 全局变量用于终止动画
        let terminalHistoryTimer = null;
        function renderTerminalHistory(lang) {
            const historyEl = document.getElementById('terminal-history');
            historyEl.innerHTML = '';
            if (terminalHistoryTimer) {
                clearTimeout(terminalHistoryTimer);
                terminalHistoryTimer = null;
            }
            const dirNames = {
                zh: { project: '项目', blog: '博客' },
                en: { project: 'Projects', blog: 'Blog' },
                ja: { project: 'プロジェクト', blog: 'ブログ' }
            };
            const dirs = dirNames[lang];
            const prompt = '<span class="term-prompt" aria-hidden="true">➜ ~ %</span>';
            const promptProjects = `<span class="term-prompt" aria-hidden="true">➜ ${dirs.project} %</span>`;
            const promptBlog = `<span class="term-prompt" aria-hidden="true">➜ ${dirs.blog} %</span>`;

            // 历史步骤
            const steps = [
                { type: 'cmd', prompt, cmd: 'ls', ariaLabel: 'List directories' },
                { type: 'output', output: `<a href="https://github.com/yuuniji" target="_blank" aria-label="${dirs.project} homepage">${dirs.project}</a>  <a href="https://yuuniji.github.io/" target="_blank" aria-label="${dirs.blog} homepage">${dirs.blog}</a>` },
                { type: 'cmd', prompt: promptProjects, cmd: `cd ~/${dirs.project} && ls`, ariaLabel: `Change to ${dirs.project} directory and list contents` },
                { type: 'output', output: data.projects.map((prj, index) => `<a href="${prj.url}" target="_blank" aria-label="${prj.label[lang]}">${prj.label[lang]}</a>`).join('<br>') },
                { type: 'cmd', prompt: promptBlog, cmd: `cd ~/${dirs.blog} && ls`, ariaLabel: `Change to ${dirs.blog} directory and list contents` },
                { type: 'output', output: data.blog.map((blog, index) => `<a href="${blog.url}" target="_blank" aria-label="${blog.label[lang]}">${blog.label[lang]}</a>`).join('<br>') }
            ];

            let i = 0;
            function typeCommand(row, prompt, cmd, ariaLabel, cb) {
                row.innerHTML = prompt + ' <span class="term-cmd" aria-label="' + ariaLabel + '"></span><span class="terminal-cursor" aria-hidden="true">▋</span>';
                const cmdSpan = row.querySelector('.term-cmd');
                const cursor = row.querySelector('.terminal-cursor');
                let idx = 0;
                function typeChar() {
                    if (idx <= cmd.length) {
                        cmdSpan.textContent = cmd.slice(0, idx);
                        cursor.style.display = 'inline-block';
                        historyEl.scrollTop = historyEl.scrollHeight;
                        idx++;
                        terminalHistoryTimer = setTimeout(typeChar, 17);
                    } else {
                        if (cursor && cursor.parentNode) cursor.parentNode.removeChild(cursor);
                        if (cb) cb();
                    }
                }
                typeChar();
            }

            function nextStep() {
                if (i >= steps.length) return;
                const s = steps[i];
                let row = document.createElement('div');
                row.className = 'term-row';
                if (s.type === 'cmd') {
                    historyEl.appendChild(row);
                    typeCommand(row, s.prompt, s.cmd, s.ariaLabel, function () {
                        i++;
                        terminalHistoryTimer = setTimeout(nextStep, 120);
                    });
                } else {
                    row.innerHTML = `<div class="term-output" role="list">${s.output}</div>`;
                    historyEl.appendChild(row);
                    historyEl.scrollTop = historyEl.scrollHeight;
                    i++;
                    terminalHistoryTimer = setTimeout(nextStep, 420);
                }
            }
            nextStep();
        }

        // 星期翻译
        const weekdays = {
            zh: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],
            en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
            ja: ['日曜日', '月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日']
        };

        // 更新时钟
        function updateClock(lang) {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const weekday = weekdays[lang][now.getDay()];
            const clockEl = document.getElementById('clock');
            clockEl.textContent = `${hours}:${minutes} ${weekday}`;
        }

        // 初始化时钟并设置定时器
        let currentLang = 'zh';
        updateClock(currentLang);
        setInterval(() => updateClock(currentLang), 60000); // 每分钟更新一次

        // 修改导航提示的翻译
        const navHints = {
            zh: {
                hint: "提示：使用 Tab 键在元素间导航，使用方向键上下选择项目，回车键确认"
            },
            en: {
                hint: "Tip: Use Tab key to navigate between elements, use arrow keys to select items, press Enter to confirm"
            },
            ja: {
                hint: "ヒント：Tabキーで要素間を移動、矢印キーで項目を選択、Enterキーで確定"
            }
        };

        // 修改语言切换函数
        function changeLanguage(lang) {
            currentLang = lang;
            // 保存语言选择到 localStorage
            localStorage.setItem('preferredLanguage', lang);
            renderContent(lang);
            updateClock(lang);
            updateNavHint(lang);
        }

        // 添加更新导航提示的函数
        function updateNavHint(lang) {
            const hintEl = document.getElementById('nav-hint');
            hintEl.textContent = navHints[lang].hint;
            hintEl.classList.add('visible');
            
            // 5秒后隐藏提示
            setTimeout(() => {
                hintEl.classList.remove('visible');
            }, 5000);
        }

        // 初始化
        function init() {
            // 获取浏览器语言
            const browserLang = navigator.language || navigator.userLanguage;
            // 从 localStorage 获取保存的语言设置
            const savedLang = localStorage.getItem('preferredLanguage');
            
            // 语言映射表（将浏览器语言代码映射到我们的支持的语言）
            const langMap = {
                'zh': 'zh',
                'zh-CN': 'zh',
                'zh-TW': 'zh',
                'zh-HK': 'zh',
                'en': 'en',
                'en-US': 'en',
                'en-GB': 'en',
                'ja': 'ja',
                'ja-JP': 'ja'
            };
            
            // 获取浏览器语言的基础代码（例如 'zh-CN' -> 'zh'）
            const baseLang = browserLang.split('-')[0];
            
            // 确定初始语言
            let initialLang;
            if (savedLang) {
                // 如果有保存的语言设置，使用保存的设置
                initialLang = savedLang;
            } else if (langMap[browserLang]) {
                // 如果浏览器语言完全匹配，使用该语言
                initialLang = langMap[browserLang];
            } else if (langMap[baseLang]) {
                // 如果浏览器语言的基础代码匹配，使用该语言
                initialLang = langMap[baseLang];
            } else {
                // 默认使用中文
                initialLang = 'zh';
            }
            
            // 设置初始语言
            currentLang = initialLang;
            renderContent(initialLang);
            updateNavHint(initialLang);
            
            let currentFocusIndex = -1;
            const focusableElements = document.querySelectorAll('a, button');
            
            // 添加键盘事件监听
            document.addEventListener('keydown', function(e) {
                // 显示导航提示
                const hintEl = document.getElementById('nav-hint');
                hintEl.classList.add('visible');
                
                // 重置隐藏计时器
                clearTimeout(hintEl.hideTimer);
                hintEl.hideTimer = setTimeout(() => {
                    hintEl.classList.remove('visible');
                }, 5000);

                // Tab 键导航
                if (e.key === 'Tab') {
                    e.preventDefault();
                    const currentIndex = Array.from(focusableElements).indexOf(document.activeElement);
                    let nextIndex;

                    if (e.shiftKey) {
                        nextIndex = currentIndex > 0 ? currentIndex - 1 : focusableElements.length - 1;
                    } else {
                        nextIndex = currentIndex < focusableElements.length - 1 ? currentIndex + 1 : 0;
                    }

                    focusableElements[nextIndex].focus();
                    currentFocusIndex = nextIndex;
                }

                // 方向键导航
                if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                    e.preventDefault();
                    const links = document.querySelectorAll('.term-output a');
                    
                    if (links.length === 0) return;

                    if (currentFocusIndex === -1) {
                        currentFocusIndex = e.key === 'ArrowDown' ? 0 : links.length - 1;
                    } else {
                        if (e.key === 'ArrowUp') {
                            currentFocusIndex = currentFocusIndex > 0 ? currentFocusIndex - 1 : links.length - 1;
                        } else {
                            currentFocusIndex = currentFocusIndex < links.length - 1 ? currentFocusIndex + 1 : 0;
                        }
                    }

                    links[currentFocusIndex].focus();
                }

                // 回车键确认
                if (e.key === 'Enter' && document.activeElement.tagName === 'A') {
                    document.activeElement.click();
                }

                // 数字键快速导航（仅当项目数量小于等于9个时）
                if (e.key >= '1' && e.key <= '9') {
                    const num = parseInt(e.key);
                    const links = document.querySelectorAll('.term-output a');
                    if (num <= links.length && links.length <= 9) {
                        links[num - 1].focus();
                        links[num - 1].click();
                    }
                }
            });
        }

        // 初始化
        init();
    </script>
</body>

</html>
